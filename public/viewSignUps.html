<!DOCTYPE html>
<html lang="en">
<head>
    <!-- favicon -->

    <!-- Encoding + mobile responsiveness -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Page info -->
    <title>Sign Ups</title>
    <meta name="description" content="Webpage to view the list of students who signed up.">
    <meta name="author" content="Datu Macalintal">

    <!-- Link Stylesheet -->


    <style>
        body{
            background-color: blanchedalmond;
        }
        h1,h2{
            color: darkgoldenrod;
            text-align: center;
            margin-bottom: 30px;
        }
        h1{
            display: flexbox;
            background-color: rgb(255, 247, 237);
        }
        table, tr, td, th{
            border: 2px solid darkgoldenrod;
            color: darkgoldenrod;
        }
        table{
            table-layout: auto;
            width: 90%;
        }
    </style>
</head>
<body>
    <h1>List of Students Who Signed Up</h1>
    <a href="../index.html">Back to Sign Up</a> <br>
    <label for="club">Choose a Club:</label>
    <select id="club" onchange="displaySignUps()">
        <option value="All" disabled selected hidden>Choose..</option>
        <option value="All">All</option>
        <option value="Alianti">Alianti</option>
        <option value="Himig Agham">Himig Agham</option>
        <option value="Cuerdas Agham">Cuerdas Agham</option>
        <option value="Ellipsis">Ellipsis</option>
        <option value="Labuyo">Labuyo</option>
    </select>
    <p id="total"></p>
    <table id="table">
        <tr>
            <th>Club</th>
            <th>ID</th>
            <th>Fullname</th>
            <th>Birthday</th>
            <th>Grade</th>
            <th>Email</th>
            <th>Mobile</th>
            <th>Intern|Extern</th>
        </tr>
    </table>
    <script>
        entries = JSON.parse(localStorage.getItem('entries')) || [];
        table = document.getElementById("table");
        club = document.getElementById("club");

        displaySignUps();
        
        function displaySignUps() {
            total = document.getElementById("total");
            // count depends on dropdown, counting number of entries associated to dropdown value
            count = 0;

            // if local storage is empty
            if (entries.length == 0){
                table.innerHTML = "<tr><th>Sorry, there has not been any sign ups yet.</th></tr>";
            }
            else{
                // prepares headers
                table.innerHTML =   `<tr>
                                        <th>Club</th>
                                        <th>ID</th>
                                        <th>Fullname</th>
                                        <th>Birthday (YYYY-MM-DD)</th>
                                        <th>Grade</th>
                                        <th>Email</th>
                                        <th>Mobile</th>
                                        <th>Intern|Extern</th>
                                    </tr>`;

                // checks every object in entries
                for (let key in entries){
                    // see if club matches with dropdown value, place entry if so, add to count
                    if (entries[key].club == club.value || club.value == "All"){
                        table.innerHTML += `<tr>
                                                <td>${entries[key].club}</td>
                                                <td>${entries[key].id}</td>
                                                <td>${entries[key].name}</td>
                                                <td>${entries[key].birthday}</td>
                                                <td>${"Grade " + entries[key].grade}</td>
                                                <td>${entries[key].email}</td>
                                                <td>${entries[key].mobile}</td>
                                                <td>${entries[key].intExt}</td>
                                            </tr>`;
                        count++;
                    }
                }
                // if none signed up for the club
                if (count == 0){
                    table.innerHTML = "<tr><th>Sorry, there are no sign ups for this club yet.</th></tr>";
                }
            }
            total.innerHTML = `Total Sign Ups: ${count}`

        }
    </script>
</body>